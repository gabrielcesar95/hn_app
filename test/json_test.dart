import 'package:hn_app/json_parsing.dart/';
import 'package:flutter_test/flutter_test.dart';

void main(){
  test("parses topstories.json", (){
    const jsonString = "[ 21577156, 21572622, 21575310, 21575391, 21573694, 21577924, 21574834, 21575614, 21575894, 21577651, 21576936, 21575963, 21572264, 21572827, 21577659, 21571938, 21562295, 21566802, 21571337, 21575183, 21575003, 21573662, 21572936, 21572911, 21575217, 21569778, 21577150, 21575374, 21572552, 21575102, 21569610, 21572227, 21572184, 21572795, 21574095, 21574165, 21574487, 21565624, 21575404, 21570739, 21574080, 21577499, 21572573, 21575869, 21567481, 21576756, 21572706, 21567876, 21567022, 21574511, 21575501, 21574089, 21576212, 21576524, 21572637, 21565841, 21556328, 21568080, 21567556, 21570352, 21570927, 21572557, 21573095, 21570219, 21576025, 21563309, 21575286, 21567063, 21566546, 21575858, 21566530, 21571971, 21557879, 21567707, 21575765, 21566589, 21566513, 21567800, 21557063, 21575138, 21568100, 21569096, 21566635, 21565372, 21571519, 21569388, 21564796, 21571610, 21566921, 21560101, 21568749, 21558250, 21558467, 21567817, 21567053, 21571721, 21567845, 21565093, 21567895, 21572395, 21554986, 21567929, 21570183, 21572355, 21568014, 21564850, 21562823, 21564990, 21555586, 21569506, 21567592, 21567746, 21563871, 21565391, 21569837, 21564636, 21558793, 21564873, 21567912, 21568414, 21562811, 21559646, 21573836, 21565030, 21567873, 21568413, 21574897, 21567630, 21573579, 21569826, 21563849, 21556978, 21567841, 21559139, 21563868, 21567777, 21557902, 21566906, 21568379, 21569244, 21560916, 21574055, 21562261, 21557523, 21568175, 21567466, 21561613, 21559581, 21559918, 21571780, 21569131, 21561556, 21556955, 21557558, 21564108, 21573072, 21566335, 21565411, 21558013, 21571890, 21561715, 21559546, 21570384, 21571033, 21570989, 21557890, 21571901, 21559787, 21572540, 21557469, 21562433, 21567124, 21570482, 21560660, 21558343, 21564579, 21560090, 21561585, 21557524, 21559541, 21561118, 21560749, 21572367, 21571026, 21568362, 21561803, 21566985, 21568201, 21569545, 21560177, 21565105, 21560519, 21561652, 21561435, 21561506, 21558684, 21560902, 21565330, 21563530, 21553527, 21567785, 21560083, 21571948, 21572490, 21553882, 21563070, 21560714, 21570096, 21558986, 21559973, 21568239, 21559873, 21559568, 21571582, 21569862, 21559503, 21564270, 21553496, 21565703, 21572271, 21554416, 21559633, 21569276, 21560996, 21557057, 21568820, 21569291, 21557309, 21554087, 21572317, 21559680, 21555168, 21561136, 21565772, 21560254, 21556894, 21559737, 21565907, 21568162, 21554459, 21561296, 21556192, 21571904, 21558317, 21567582, 21555778, 21566574, 21560166, 21558841, 21555740, 21555954, 21565442, 21570322, 21555894, 21564164, 21558885, 21559406, 21556634, 21557713, 21566767, 21563752, 21557974, 21558053, 21563640, 21558575, 21566859, 21565234, 21565227, 21571476, 21555238, 21565564, 21563355, 21565523, 21556619, 21559526, 21570298, 21556077, 21560164, 21562805, 21555205, 21553948, 21553923, 21561725, 21560143, 21570605, 21555041, 21564005, 21565394, 21561075, 21557291, 21559167, 21570008, 21568654, 21560536, 21558792, 21557779, 21553711, 21569330, 21569738, 21566010, 21553630, 21560362, 21568028, 21566828, 21564656, 21557909, 21571825, 21554900, 21556501, 21560871, 21558805, 21562589, 21558769, 21566365, 21570544, 21564113, 21564961, 21567654, 21559830, 21558200, 21569020, 21556733, 21567308, 21559800, 21559334, 21570594, 21568594, 21555816, 21556472, 21557278, 21561415, 21564837, 21557665, 21568029, 21555856, 21554363, 21560796, 21556801, 21565695, 21556492, 21569572, 21567545, 21567492, 21569507, 21566084, 21557985, 21554965, 21569191, 21559783, 21559285, 21559394, 21561986, 21564246, 21566244, 21568752, 21562402, 21556898, 21562963, 21556369, 21557679, 21556731, 21564308, 21568131, 21571169, 21564889, 21556169, 21567528, 21555974, 21567482, 21567375, 21557607, 21571612, 21567292, 21567261, 21567209, 21567178, 21557314, 21566830, 21566786, 21566636, 21566610, 21554876, 21566491, 21559377, 21563013, 21556124, 21560334, 21561453, 21553792, 21554401, 21564303, 21558444, 21564161, 21561262, 21558421, 21563931, 21563808, 21570348, 21553562, 21560009, 21569682, 21560633, 21555810, 21555958, 21553748, 21570757, 21560883, 21558737, 21558425, 21556649, 21570473, 21568030, 21561915, 21559719, 21558347, 21559625, 21562447, 21561173, 21554679, 21558197, 21554063, 21560789, 21553874, 21553866, 21554990, 21557728, 21562276, 21559776, 21553908, 21559460, 21559373, 21553537, 21558925, 21558872, 21558308, 21556567, 21558049, 21558329, 21556216, 21557520, 21557458, 21555559, 21566806, 21557257, 21554808, 21554806, 21554766, 21559780, 21556975, 21554022, 21556677, 21556671, 21559798, 21554268, 21554933, 21554820, 21554486, 21553455, 21557719, 21575596, 21559794, 21560042, 21557513, 21555033, 21556497, 21554359, 21556756, 21575475, 21571079, 21558386, 21565274, 21572635, 21572553 ]";

    expect(parseTopStories(jsonString).first, 21577156);
  });


  test("parses topstories.json", (){
    const jsonString = """{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}""";

    expect(parseArticle(jsonString).by, 'dhouston');
  });

}